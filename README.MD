## GamePT(ê²Œì„ ê³¼ì™¸ eCommerce í”Œë«í¼)

### ì„œë¹„ìŠ¤ ì„¤ëª… ë° ê¸°íš ì˜ë„

- E-sports êµìœ¡ ì—°ê³„ ì‚¬ì—… ëª¨ë¸ ë° í•¨ê»˜ ê²Œì„ í•  ìœ ì €ë¥¼ ì°¾ëŠ” ë“€ì˜¤ ì‹ ì²­ ì„œë¹„ìŠ¤
- ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì´ìš©í•œ eCommerce ì œì‘ ë° Riot-apië¥¼ ì´ìš©í•œ ë“€ì˜¤ ì‹ ì²­ ì„œë¹„ìŠ¤ ê°œë°œ


[[ê¸°ëŠ¥ì •ì˜ì„œ](https://docs.google.com/document/d/12oLpqgt0L2I_BdF_KKW2tpO2SkXREyM7zhsUKMOSxBc/edit)]

---

## ğŸ›  ê°œë°œí™˜ê²½

1. ì‚¬ìš©ì–¸ì–´ : JAVA , MariaDB(MySQL), HTML5 , CSS , JS
2. JDK : Amazon Corretto version 17.0.9
3. ì—ë””í„° : IntelliJ IDEA, DBeaver
4. DBì¢…ë¥˜ : MariaDB(MySQL), Server(local)
5. í”„ë ˆì„ì›Œí¬ : SpringBoot
6. ë¼ì´ë¸ŒëŸ¬ë¦¬ : JPA, thymeleaf, security, lombok, Java-email, bootstrap, jquery


---

## â˜ï¸ ERD ([ë§í¬](https://www.erdcloud.com/d/LqovpTTw8Z6LNTNdw))
![img.png](img.png)


---

## ğŸ‘€ ì‹œì—°ì˜ìƒ



---

## ğŸ”¥ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

## 1.


### ì´ìŠˆ ë‚´ì—­
- ì±„íŒ… ì „ì†¡ ë¬¸ì œ

### ë¬¸ì œì  ì„¤ëª…
- ì›¹ ì†Œì¼“ìœ¼ë¡œ 1:1 ì±„íŒ…ë°© êµ¬í˜„ í›„ í•˜ë‚˜ì˜ ì±„íŒ… ë©”ì„¸ì§€ë¥¼ ë³´ëƒˆëŠ”ë°, ê°™ì€ ì±„íŒ…ì´ ì—¬ëŸ¬ë²ˆ ë³´ë‚´ì§


![Image](https://github.com/eCommerce-Team-A/GamePT/assets/37567402/4a65f7ae-52f3-4e0d-b07a-511a27f55510)



## ğŸš¥ í•´ê²°

- í˜„ì¬ ì†Œì¼“ í•¸ë“¤ëŸ¬ì—ì„œ ì—°ê²°ëœ ì„¸ì…˜ê³¼ í•´ë‹¹ ì›¹ì†Œì¼“ ì—°ê²° ì •ë³´ë¥¼ ë‹´ì•„ë‘ê¸° ìœ„í•œ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ ë‘ì—ˆìŒ.
```java
// ì›¹ì†Œì¼“ ì„¸ì…˜ì„ ë‹´ì•„ë‘˜ ë¦¬ìŠ¤íŠ¸
List<HashMap<String, Object>> rls = new ArrayList<>(); 

@Override
    public void afterConnectionEstablished(WebSocketSession session) throws Exception {
        //ì†Œì¼“ ì—°ê²°
        super.afterConnectionEstablished(session);
        boolean flag = false;
        String url = session.getUri().toString();
        String roomNumber = url.split("/chat/")[1];
        int idx = rls.size(); //ë°©ì˜ ì‚¬ì´ì¦ˆë¥¼ ì¡°ì‚¬í•œë‹¤.
        if(rls.size() > 0) {
            for(int i=0; i<rls.size(); i++) {
                String rN = (String) rls.get(i).get("roomNumber");
                if(rN.equals(roomNumber)) {
                    flag = true;
                    idx = i;
                    break;
                }
            }
        }

        if(flag) { //ì¡´ì¬í•˜ëŠ” ë°©ì´ë¼ë©´ ì„¸ì…˜ë§Œ ì¶”ê°€í•œë‹¤.
            HashMap<String, Object> map = rls.get(idx);
            map.put(session.getId(), session);
        }else { //ìµœì´ˆ ìƒì„±í•˜ëŠ” ë°©ì´ë¼ë©´ ë°©ë²ˆí˜¸ì™€ ì„¸ì…˜ì„ ì¶”ê°€í•œë‹¤.
            HashMap<String, Object> map = new HashMap<String, Object>();
            map.put("roomNumber", roomNumber);
            map.put(session.getId(), session);
            rls.add(map);
        }

        //ì„¸ì…˜ë“±ë¡ì´ ëë‚˜ë©´ ë°œê¸‰ë°›ì€ ì„¸ì…˜IDê°’ì˜ ë©”ì‹œì§€ë¥¼ ë°œì†¡í•œë‹¤.
        JSONObject obj = new JSONObject();
        obj.put("type", "getId");
        obj.put("sessionId", session.getId());
        session.sendMessage(new TextMessage(obj.toJSONString()));
    }

```

-  ì†Œì¼“ì´ ì¢…ë£Œë˜ë©´ í•´ë‹¹ ì„¸ì…˜ê°’ë“¤ì„ ì„¸ì…˜ ì•„ì´ë””ë¡œ í†µí•´  ë¦¬ìŠ¤íŠ¸ì—ì„œ ì§€ì›€.

```java
@Override
    public void afterConnectionClosed(WebSocketSession session, CloseStatus status) throws Exception {
        //ì†Œì¼“ ì¢…ë£Œ
        if(rls.size() > 0) { //ì†Œì¼“ì´ ì¢…ë£Œë˜ë©´ í•´ë‹¹ ì„¸ì…˜ê°’ë“¤ì„ ì°¾ì•„ì„œ ì§€ìš´ë‹¤.
            for(int i=0; i<rls.size(); i++) {
                rls.get(i).remove(session.getId());
            }
        }
        super.afterConnectionClosed(session, status);
    }
```

## ê²°ë¡  
## FrontEndì—ì„œ ë‹¤ë¥¸ ì±„íŒ…ë°© ì´ë™ì‹œ ì†Œì¼“ ì—°ê²°ì„ ëŠê³  ë‹¤ì‹œ ì—°ê²°í•´ì•¼ ì†Œì¼“ ì—°ê²°ì´ ìŒ“ì´ì§€ ì•ŠìŒ

```javascript
$(".list-group-item").click(function(){
    $("#unClick").hide();
    $("#chat").show();
    roomNum = $(this).attr("value");

    var url = "ws://localhost:8010/wss/chat/"+roomNum;

    if(url == websocket.url){
        return;
    }

    $("#chattingArea").empty();

    getChattingRoom(roomNum);

    if(websocket != ""){
        websocket.close();
    }

    websocket = new WebSocket(url);
    websocket.onmessage = onMessage;

});
```

## 2.
### ì´ìŠˆ ë‚´ì—­
- ë¼ì¸ ë³„ë¡œ articleList ë¥¼ ë‚˜ì˜¤ê²Œ í•˜ë ¤ í–ˆìœ¼ë‚˜, í•´ë‹¹ ë°ì´í„°ë¥¼ htmlì— ë„˜ê¸°ì§€ ëª»í•¨

### ë¬¸ì œì  ì„¤ëª…

```java
@Controller
@RequiredArgsConstructor
@RequestMapping("/api")
public class DuoArticleApiController {

    private final DuoArticleService duoArticleService;

    @GetMapping("/getDuoArticleList/{line}")
    public List<DuoArticle> getDuoArticlesByMyLine(@PathVariable(value = "line") String line, Model model) {
        List<DuoArticle> duoArticleList;
        if (line.equals("fill")) {
            duoArticleList = this.duoArticleService.getAllDuoArticles();
        } else {
            duoArticleList = this.duoArticleService.getDuoArticlesByMyLine(line);
        }
        return duoArticleList;
    }
}
```
```JS
function findByLine() {
            var selectedLine = $("input[name='sortByLine']:checked").val();  //í´ë¦­í•œ ê°’ì„ ì €ì¥
            $.ajax({
                type: 'GET',  //ìš”ì²­ íƒ€ì… (get, post, put ë“±ë“±)
                url: '/api/getDuoArticleList/' + selectedLine,   //ìš”ì²­í•  url
                dataType: 'json',   //ë°ì´í„° íƒ€ì… (xml, json, text ë“±ë“±)
                success: function (result) { // ê²°ê³¼ ì„±ê³µ ì½œë°±í•¨ìˆ˜
                    console.log(result);
                    $("#duoArticle").X // ë¬¸ì œì 
                },
                error: function (request, status, error) { // ê²°ê³¼ ì—ëŸ¬ ì½œë°±í•¨ìˆ˜
                    console.log(error)
                }
            })
        }
```
```html
<tr id="duoArticle" th:each="duoArticle, loop : ${duoArticleList}">...</tr>
```

- ìœ„ì™€ ê°™ì´ í•´ë‹¹ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°›ì•„ì˜¤ëŠ” ê²ƒì€ ëì§€ë§Œ, íƒ€ì„ë¦¬í”„ì—ì„œ ì“°ëŠ” duoArticleListì— ì§ì ‘ì ìœ¼ë¡œ ì¤„ ìˆ˜ ì—†ìŒ


## ğŸš¥ í•´ê²°

1. í•´ë‹¹ ë°ì´í„°ë¥¼ íƒœê·¸ë§ˆë‹¤ ì§€ì •(X)
```JS
function getArticleById(duoArticleId) {
            console.log(duoArticleId);
            $.ajax({
                type: 'GET',
                url: '/api/getDouArticle/' + duoArticleId,
                dataType: 'json',
                success: function (result) {
                    let duoArticle = result;
                    console.log(duoArticle);
                    $("input[name='myLine'][value='" + duoArticle.myLine + "']").prop("checked", true);
                    $("input[name='findLine'][value='" + duoArticle.findLine + "']").prop("checked", true);
                    $("input[name='microphoneCheck']").prop("checked", duoArticle.microphoneCheck);
                    $("textarea[name='content']").val(duoArticle.content);
                    $("button[name='createButton']").hide();
                    $("button[name='modifyButton']").show();
                    $("form[name='createForm']").attr("action", "/duo/modify/" + duoArticleId);
                },
                error: function (request, status, error) {
                    console.log(error);
                }
            })
        }

function findByLine() {
            var selectedLine = $("input[name='sortByLine']:checked").val();  //í´ë¦­í•œ ê°’ì„ ì €ì¥
            $.ajax({
                type: 'GET',  //ìš”ì²­ íƒ€ì… (get, post, put ë“±ë“±)
                url: '/api/getDuoArticleList/' + selectedLine,   //ìš”ì²­í•  url
                dataType: 'json',   //ë°ì´í„° íƒ€ì… (xml, json, text ë“±ë“±)
                success: function (result) { // ê²°ê³¼ ì„±ê³µ ì½œë°±í•¨ìˆ˜
                    $.each(result, function(index, item) {  //ë°˜ë³µë¬¸ ì¶”ê°€
                    var listItem = '<li>' + item + '</li>';
                    $('#duoArticle').append(listItem);
                });
                    console.log(result);
                    $("#duoArticle").X // ë¬¸ì œì 
                },
                error: function (request, status, error) { // ê²°ê³¼ ì—ëŸ¬ ì½œë°±í•¨ìˆ˜
                    console.log(error)
                }
            })
        }
```
- ê²Œì‹œê¸€ ìˆ˜ì • ê¸°ëŠ¥ì—ì„œ í•´ë‹¹ ë°ì´í„° ê²Œì‹œê¸€ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•œ ë°©ì‹ì„ ë°˜ë³µë¬¸ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•

*ë¬¸ì œì 

 1)í•´ë‹¹ ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ëŠ” tríƒœê·¸ ì•ˆì˜ ë‚´ìš©ì´ ë°©ëŒ€í•´, ì§ì ‘ í•˜ë‚˜í•˜ë‚˜ ì§€ì •í•´ì£¼ê¸° ë³µì¡í•˜ë‹¤.

 2)ì§ì ‘ ì§€ì •í•´ì¤€ ë‚´ìš©ì´ ìš”ì²­ì´ ì˜¬ ë•Œë§ˆë‹¤, ë°˜ë³µë¬¸ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.

2. jQuery replace
```java
@Controller
@RequiredArgsConstructor
@RequestMapping("/api")
public class DuoArticleApiController {

    private final DuoArticleService duoArticleService;

    @GetMapping("/getDuoArticleList/{line}")
    public String getDuoArticlesByMyLine(@PathVariable(value = "line") String line, Model model) {
        List<DuoArticle> duoArticleList;
        if (line.equals("fill")) {
            duoArticleList = this.duoArticleService.getAllDuoArticles();
        } else {
            duoArticleList = this.duoArticleService.getDuoArticlesByMyLine(line);
        }
        model.addAttribute("duoArticleList", duoArticleList);
        return "duo/list::#duoArticle";  //duoArticleë¶€ë¶„ë§Œì„ ì—…ë°ì´íŠ¸
    }
}
```
```JS
function findByLine() {
            var selectedLine = $("input[name='sortByLine']:checked").val(); //í´ë¦­í•œ ê°’ì„ ì €ì¥
            $.ajax({
                type: 'GET',              // íƒ€ì… (get, post, put ë“±ë“±)
                url: '/api/getDuoArticleList/' + selectedLine,     // ìš”ì²­í•  url
                success: function (result) { // ê²°ê³¼ ì„±ê³µ ì½œë°±í•¨ìˆ˜
                    $("#duoArticle").replaceWith(result); //table -> result êµì²´
                },
                error: function (request, status, error) { // ê²°ê³¼ ì—ëŸ¬ ì½œë°±í•¨ìˆ˜
                    console.log(error)
                }
            })
        }
```
```html
<tr id="duoArticle" th:each="duoArticle, loop : ${duoArticleList}">...</tr>
```
- ìœ„ì™€ ê°™ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í•´ë‹¹ ê²½ë¡œë¥¼ ì§€ì •í•˜ì—¬ idê°€duoArticleë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸ í•˜ê³  scriptì—ì„œ í•´ë‹¹ ê²½ë¡œë¥¼ ê¸°ì¡´ íƒœê·¸ ìš”ì†Œë“¤ì„ ìƒˆë¡œ ë¶ˆëŸ¬ì˜¨ ìš”ì†Œì™€ êµì²´í•¨



